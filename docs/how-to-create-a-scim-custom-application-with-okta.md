## Metadata_Start 
## code: en
## title: How to create a SCIM Custom Application with Okta 
## slug: how-to-create-a-scim-custom-application-with-okta 
## seoTitle:  
## description:  
## contentType: Markdown 
## Metadata_End
In this article, you'll find a tutorial to create a SCIM application in the user-provider tool Okta.

### Supported Features
* Create Users
* Update User Attributes
* Deactivate Users
* Import Users
* Import groups
* Group push

* * *
## Requirements

* Postman tool or equivalent for [manual access token generation.](/v3-32/docs/domum-how-to-manually-create-an-activation-token)
* Enable communication between the senhasegura and Okta platforms.
* A valid account with administrator permission in Okta.
* A group with users already [created in Okta](https://help.okta.com/asa/en-us/Content/Topics/Adv_Server_Access/docs/setup/create-a-group.htm#:~:text=Open%20the%20Advanced%20Server%20Access%20dashboard.%20Click%20Groups.,the%20group.%20See%20Team%20roles.%20Click%20Create%20Group.).
* When registering a user in Okta, ensure their unique identifier is set as their email address.
* The Okta registered users shouldn’t have more than one email address.

* * *
### Step 1: Create SCIM application
:::(Warning) (Caution)
* Okta reserves the right to modify the development environment without prior notice. As a result, the steps outlined in this guide may vary accordingly.
* Please note that depending on the specific configurations of the customer's Okta environment, the information provided in the step-by-step instructions may not align perfectly.
:::

1. In your Okta account, access the administration area. If your user doesn't automatically enter the administration area, click the **Admin** button in the top right corner of the screen.
2. In the top left corner menu, select **Applications > Applications**.
3. In the new page, click the **Create App Integration** button.
4. In the **Create a new app integration** window, select **SWA - Secure Web Authentication**.
5. Click **Next**. 
6. You'll see two sections on the **Create SWA Integration** page. Fill in the **General App Settings** section.
    6.1. **App name**: enter a descriptive name.
    6.2.  **App´s login page URL**: enter the senhasegura server address. Example: ```https://mysenhasegura.exemple.com```.
    6.3. Click **Show Advanced Settings**.
    6.4. Complete  **Redirect URL**  with the URL entered in the **App´s login page URL** field and add ```/flow/auth/signin``` at the end. Example: ```https://mysenhasegura.exemple.com/flow/auth/signin```.
    6.5. Leave the **Do not display application icon to users** and **This is an internal application** text boxes in blank.
7. Fill in the **How will your users sign in?** section.
    7.1.  In **Who sets the credentials?**, select **Administrator sets username, password is the same as user's Okta password**.
    7.2. In **Application username**, select **Custom**. Then in the **Enter a custom rule** field, enter ```user.login```
    7.3. In **Update application username on**, select **Create and update**.
8. Click **Finish**.

* * *

### Step 2: Authenticate the SCIM application

1. After creating the application in the previous step, select the **General** tab on the initial screen of the **Application.**
2. In the **App Settings** section, click **Edit**.
3. Localize the **Provisioning** field and set **SCIM**.
4. Click **Save**. 
5. Go to the **Provisioning** tab.
6. In the left column, select **Settings > Integration**. Click the **Edit** button and complete the information.
    6.1. In **SCIM connector base URL**, enter the senhasegura login URL (the same URL as in the **App Login Page URL** field), and add ```/iso/scim/v2``` at the end. Example: ```https://mysenhasegura.exemple.com/iso/scim/v2```.
    6.2. In **Unique identifier field for users**, enter the plain text ```email```.
    6.3. In **Supported provisioning actions**, check the **Push New Users, Push Profile Updates**, and **Push Groups** boxes.
    6.4. In **Authentication Mode**, select **HTTP Header**.
    6.5. In **Authorization**, complete with the [Access Token manually generated by Postman.](/v3-32/docs/domum-how-to-manually-create-an-activation-token)
    6.6. Click **Test connector**.
    6.7. Click **Save**.

* * *

### Step 3: Provision the SCIM application

1. Still on your application screen, stay on the **Provisioning** tab.
2. In the left column, localize **Settings**, and select **To App**.
3. In the **Provisioning to App** field, click the **Edit** button.
    3.1. In **Create Users** set **Enabled**.
    3.2. In **Update User Attributes** set **Enabled**.
    3.3. In **Deactivate Users** set **Enabled**.
    3.4. Leave **Sync Password** blank.
3. Click **Save**.
4. In the left column, localize **Settings**, and select **To Okta**.
5. In the **Import Safeguard** field, click the **Edit** button.
6. In **App unassignment safeguard** set **Enabled**.
7. Select **20** before **is the threshold for unassignments from any app**.
8. In **Org-wide unassignment safeguard** select **Enabled**.
9. Select **20** before **is the threshold for unassignments from any.**
10. Click **Save.**

* * *

### Step 4: Configure user attributes in Okta

1. In the top left corner menu, select **Directory > Profile Editor**.
2. In the **Users** tab, select the **Profile** corresponding to the application you created earlier. To select it, click the text.
3. On the new page, locate the **Attributes** field.
4. Click the **Add attribute** button and complete the information for the first attribute.
    4.1. **Data type**: select **string**.
    4.2. **Display name**: enter ```formatted```.
    4.3. **Variable name**: enter ```NameFormatted```.
    4.4. **External name**: enter ```NameFormatted```.
    4.5. **External namespace**: enter ```urn:ietf:params:scim:schemas:core:2.0:User```
    4.6. **Description**: enter ```The full name, including all middle\\nnames, titles, and suffixes as appropriate, formatted for display.```
    4.7. **Scope**: set **User personal**.
    4.8. **User permission**: set **Read-Write**.
5. Click **Save and Add Another.**
6. In the **Add attribute** window, complete the information for the second attribute:
    6.1. **Data type**: select **string**.
    6.2. **Display name**: enter ```customCode```.
    6.3. **Variable name**: enter ```customCode```.
    6.4. **External name**: enter ```customCode```.
    6.5. **External namespace**: enter ``` urn:ietf:params:scim:schemas:core:2.0:User```
    6.6. **Description**: enter ```The unique custom code of the User.```
    6.7. **Scope**: set **User personal**
    6.8. **User permission**: set **Read-Write**.
7. Click **Save and Add Another**.
8. In the **Add attribute** window, complete the information for the third attribute:
    8.1. **Data type**: select **string array**.
    8.2. **Display name**: enter ```customCodes```.
    8.3. **Variable name**: enter ```customCodes```.
    8.4. **External name**: enter ```customCodes```.
    8.5. **External namespace:** enter ```urn:ietf:params:scim:schemas:core:2.0:User```.
    8.6. **Description**: enter ```User custom codes of the users.```
    8.7. **Scope**: set **User personal**.
    8.8. **User permission**: set **Read-Write**.
9. Click **Save and Add Another**.
10. In the **Add attribute** window, complete the information for the fourth and last attribute:
    10.1. **Data type**: select **boolean**.
    10.2. **Display name**: enter ```thirdPartyVendor```.
    10.3. **Variable name**: enter ```thirdPartyVendor```.
    10.4. **External name**: enter ```thirdPartyVendor```.
    10.5. **External namespace**: enter ```urn:ietf:params:scim:schemas:core:2.0:Group```.
    10.6. **Description**: enter ```Is a thirdParty group.```
    10.7. **User permission**: set **Read-Write**.
11. Click **Save**.

* * *

### Step 5: Map user attributes

1. In the top left corner menu, select **Directory > Profile Editor.**
2. In the **Users** tab, click the **Mappings** button corresponding to the application you created earlier.
3. Click the **Okta User to [Application Name you created]** tab.
4. Locate the end of the list. In the right column, you'll find the four attributes you created in step 4.
5. Map the attributes in the right column with the following expressions in the left column:
    5.1. Enter ```user.displayName``` for **NameFormatted**. 
    5.2. Enter ```"test-CustomCode"``` for **customCode**.
    5.3. Enter `````` for **customCodes**. 
    5.4. Enter ```"1"``` for **thirdPartyVendor.** 
6. Click **Save Mappings.**
7. Click **Apply Updates now.**

* * *

### Step 6: Associate a group with the SCIM application

1. In the top left corner menu, select **Directory > Groups**.
2. In **Group name**, click the name of the group you want to associate with your application.
3. In the **Applications** tab, click the **Assign Applications** button.
4. Locate the name of the SCIM application you created in the list and click **Assign**.
5. In the window **Assign Applications to Group name you want to associate with the application**, select **true** in the **thirdPartyVendor** field .
6. Click **Save and Go Back**.
7. Click **Done**.

* * *

### Step 7: Activate the group in application

1. In the top left corner menu, select **Applications > Applications**.
2. Click the application you created.
3. On your application's home screen, select the **Push Groups** tab.
4. Locate the **Push Groups** button and select + **Find groups by name.**
5. Enter the group name you'll activate in the **Enter a group to push** field.
6. Click **Save.**
7. Wait for the pushing to finish.
8. On the right, you'll see the confirmation **Active** in green in the **Push Status** column.

You've just configured your SCIM application in Okta. The groups you’ve activated in the application will appear on the senhasegura platform.

* If you’ve created a group of **Vendors**, see the list in **Grid Menu > Domum Remote Access > Settings > Vendor**.
* If you’ve created a Group of internal users, see the list at:
    * **Grid Menu > Settings > User Management > Users**  (for users).
    * **Grid Menu > Domum > Settings > Internal Users > Group**  (for groups).

* * *

## Known Issues/Troubleshooting
N/A

* * *
## Next steps

You’ve already completed provisioning with the IGA tool for **Internal user groups**. These users can now receive the access link to **Domum** either manually or automatically, depending on the previous settings .

For **Vendor** groups related to third-party users, you must complete an extra step to complete the provisioning process. For more details, refer to the documentation on [How to link an IGA provider group to an access group in Domum](/v3-32/docs/how-to-link-an-iga-provider-group-to-an-access-group-in-domum).

